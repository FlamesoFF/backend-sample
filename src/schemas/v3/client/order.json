{
    "$id": "client_order_v3",
    "$schema": "http://json-schema.org/draft-07/schema",
    "version": "1.0.0",
    "definitions": {
        "create": {
            "type": "object",
            "description": "Payload for POST /v3/orders",
            "additionalProperties": false,
            "required": [
                "manager_id",
                "client_id"
            ],
            "properties": {
                "manager_id": {
                    "type": "string"
                },
                "client_id": {
                    "type": "string"
                },
                "client_reference": {
                    "type": "string"
                },
                "thread_id": {
                    "type": "string"
                },
                "date": {
                    "$ref": "client_definitions_v3#/definitions/date"
                },
                "tags": {
                    "type": "string"
                },
                "contact_email": {
                    "$ref": "common_definitions_v3#/definitions/email"
                },
                "companies": {
                    "type": "array",
                    "description": "List of companies IDs",
                    "items": {
                        "type": "string"
                    }
                }
            }
        },
        "update": {
            "type": "object",
            "description": "Payload for PUT /v3/orders"
        },
        "list_item": {
            "$id": "order_list_item",
            "type": "object",
            "description": "Type definition for the orders list output: GET /v3/orders",
            "allOf": [
                {
                    "$ref": "client_definitions_v3#/definitions/list_item_standard"
                }
            ],
            "required": [
                "status_compliance",
                "status_account",
                "number",
                "order_date",
                "companies",
                "description",
                "status_order",
                "status_client"
            ],
            "properties": {
                "country_code": {
                    "type": "string",
                    "examples": [
                        "SC",
                        "RU",
                        "UA"
                    ]
                },
                "status_compliance": {
                    "type": "string",
                    "minLength": 1
                },
                "status_account": {
                    "type": "string",
                    "minLength": 1
                },
                "status_order": {
                    "type": "string",
                    "minLength": 1
                },
                "status_client": {
                    "type": "string",
                    "minLength": 1
                },
                "number": {
                    "type": "string",
                    "pattern": "ORD-\\d{6}\\w{2}$"
                },
                "order_date": {
                    "$ref" : "client_definitions_v3#/definitions/date",
                    "examples": [
                        "2019-08-16"
                    ]
                },
                "companies": {
                    "type": "string",
                    "description": "Assembled from array of companies",
                    "examples": [
                        "yyy-ltd",
                        "3 companies",
                        "Company With a Very Long Name"
                    ]
                },
                "description": {
                    "type": "string",
                    "minLength": 1,
                    "description": "stringified tags",
                    "examples": [
                        "AN20/CGI",
                        "AN20, CGS+, INC"
                    ]
                }
            }
        },
        "list": {
            "type": "array",
            "description": "Orders list",
            "items": {
                "$ref": "#/definitions/list_item"
            },
            "additionalProperties": false
        }
    }
}